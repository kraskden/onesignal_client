<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="manifest" href="manifest.json" />
</head>

<body>
  <h1 id="userId">Loading...</h1>
  <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
  <script defer>

    var userId = null;

    window.OneSignal = window.OneSignal || [];
    OneSignal.push(function () {
      OneSignal.init({
        appId: "245d9059-38d6-40bb-a8df-9acec736e84f",
        subdomainName: "www.s7.ru",
        allowLocalhostAsSecureOrigin: true,
        notifyButton: {
          enable: true,
        },
      });
      OneSignal.showNativePrompt();
    });

    function updateUserId() {
      if (userId) {
        return;
      }
      OneSignal.getUserId()
        .then((id) => {
          userId = id
          console.log(userId)
          document.getElementById('userId').innerText = `User id: ${userId}`
        })
        .catch(console.log)
    }

    setInterval(updateUserId, 1000)
  </script>
</body>

</html>